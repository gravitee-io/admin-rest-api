{
	"info": {
		"_postman_id": "49b1f256-8245-46a5-b35d-2781c22f8f8f",
		"name": "API Portal : Business Error",
		"description": "This collections contains requests to test business errors (no 401) on the Portal API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "apis",
			"item": [
				{
					"name": "400",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Enable rating service",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "3fe4d76c-702c-4e73-8ceb-d8b3d00da897",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"portal\": {\n\t\t\"rating\": {\n\t\t\t\"enabled\": true\n\t\t}\n\t}\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/portal",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"portal"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create API",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "15ec09b1-5d13-4124-a81d-e981bd8be426",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_api\", JSON.stringify(jsonData));",
													"pm.environment.set(\"created_api_id\", jsonData.id);",
													"pm.environment.set(\"created_api_owner_id\", jsonData.owner.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"404API\",\n\t\"version\":\"1.0\",\n\t\"description\":\"API for 'Page not found' and API not visible\",\n\t\"contextPath\":\"/404api\",\n\t\"endpoint\":\"http://localhost\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis"
											]
										}
									},
									"response": []
								},
								{
									"name": "Publish created API",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "3848b0b8-a6d0-4b34-85f4-f1656489d48c",
												"exec": [
													"var createdApi_toPublish = JSON.parse(pm.environment.get(\"created_api\"));",
													"createdApi_toPublish.lifecycle_state='published';",
													"delete createdApi_toPublish.id;",
													"delete createdApi_toPublish.state;",
													"delete createdApi_toPublish.created_at;",
													"delete createdApi_toPublish.updated_at;",
													"delete createdApi_toPublish.owner;",
													"delete createdApi_toPublish.context_path;",
													"pm.environment.set(\"createdApi_toPublish\", JSON.stringify(createdApi_toPublish));",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "b307ef73-a33a-4f44-93ea-8e01fc628831",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{createdApi_toPublish}}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "0bf3b3ed-e111-4d3b-b407-401b420f1f14",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "39bb7da3-78a4-41e7-ad3e-1b405f3ec3b7",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Input must not be null.",
							"item": [
								{
									"name": "POST /apis/:apiId/rating - Invalid input",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "88d9046a-5fd7-415d-baa9-737fe79d48e9",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/ratings",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"ratings"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /apis/_search",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "6c1f2f29-7cc7-40ae-9962-b59878d7e429",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/_search",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												"_search"
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "42a24b54-29e0-4b80-b16a-d228235c8b11",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "2e68c761-e23b-48b1-9ff9-76cde2efe659",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"pm.test(\"Input must not be null.\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Input must not be null.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Create a rating",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e2e5fe86-c506-47c9-8681-fb651837d361",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_rating_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"title\":\"400 title\",\n\t\"comment\":\"400 comment\",\n\t\"rate\": 2\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/ratings",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"ratings"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Rating already exists",
							"item": [
								{
									"name": "POST /apis/:apiId/rating - Invalid input",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "7da1c20e-6a24-4694-86ee-39796200c7b0",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"title\":\"400 new title\",\n\t\"comment\":\"400 new comment\",\n\t\"value\": 3\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/ratings",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"ratings"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "ca5876f1-69c9-433c-9734-7f279aeb7e1a",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "0423ccc8-a83f-476e-a0ae-53d320a80031",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"pm.test(\"Rating already exists\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Rating already exists for api [\"+pm.environment.get(\"created_api_id\")+\"] and user [\"+pm.environment.get(\"created_api_owner_id\")+\"].\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean up --",
							"item": [
								{
									"name": "Delete created Rating",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "21814df3-8a74-4252-b703-0bbdc97b01e8",
												"exec": [
													"tests[\"Status code is 204\"] = responseCode.code === 204;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/ratings/:ratingId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"ratings",
												":ratingId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												},
												{
													"key": "ratingId",
													"value": "{{created_rating_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete created API",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "c38745fb-94c2-4cb1-9c2e-a7cc78954962",
												"exec": [
													"tests[\"Status code is 204\"] = responseCode.code === 204;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "e6e03f88-f3b6-47ca-9c83-04fc77a355d5",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "28cb028c-b385-459f-bfe7-14ddbe71ad5e",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "60fc1f36-3d68-490b-8c04-398777666d54",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "2ea82a4e-6d84-42d5-b922-ab67ca76262a",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "403",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Disable rating service",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "d9628a4f-57f5-4da9-9913-73bfaa311a8b",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"portal\": {\n\t\t\"rating\": {\n\t\t\t\"enabled\": false\n\t\t}\n\t}\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/portal",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"portal"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create API",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "efe72fe0-7620-43ea-92ea-5ab9018a3301",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_api\", JSON.stringify(jsonData));",
													"pm.environment.set(\"created_api_id\", jsonData.id);",
													"pm.environment.set(\"created_api_owner_id\", jsonData.owner.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"404API\",\n\t\"version\":\"1.0\",\n\t\"description\":\"API for 'Page not found' and API not visible\",\n\t\"contextPath\":\"/404api\",\n\t\"endpoint\":\"http://localhost\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis"
											]
										}
									},
									"response": []
								},
								{
									"name": "Publish created API",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "77d2c044-050c-4ab3-89c3-dd0d118f4242",
												"exec": [
													"var createdApi_toPublish = JSON.parse(pm.environment.get(\"created_api\"));",
													"createdApi_toPublish.lifecycle_state='published';",
													"delete createdApi_toPublish.id;",
													"delete createdApi_toPublish.state;",
													"delete createdApi_toPublish.created_at;",
													"delete createdApi_toPublish.updated_at;",
													"delete createdApi_toPublish.owner;",
													"delete createdApi_toPublish.context_path;",
													"pm.environment.set(\"createdApi_toPublish\", JSON.stringify(createdApi_toPublish));",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "7de580e8-9fad-4fc4-9f1a-79ebacd3e0e7",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{createdApi_toPublish}}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "65879b31-31af-4af4-8929-85d1f9e3d2c3",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "1a2566bb-bd2d-4bf5-a44f-36ad8c5ae0c8",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Test cases --",
							"item": [
								{
									"name": "POST /apis/:apiId/rating - No permission (User = application1)",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "87908d42-e064-479e-91d0-103af0169a9d",
												"exec": [
													"pm.test(\"Unsufficient rights\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"You do not have sufficient rights to access this resource\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "application1",
													"type": "string"
												},
												{
													"key": "username",
													"value": "application1",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"title\":\"400 new title\",\n\t\"comment\":\"400 new comment\",\n\t\"value\": 3\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/ratings",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"ratings"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "72ce866e-89ab-4acf-aac6-9165d0acddd5",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "37e980d3-51b3-417e-896e-e93f85277844",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 403\", function () {",
											"    pm.response.to.have.status(403);",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean up --",
							"item": [
								{
									"name": "Delete created API",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "d4f7ef02-4070-4e11-9de4-9052efac32dc",
												"exec": [
													"tests[\"Status code is 204\"] = responseCode.code === 204;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "9ba593ce-f017-46d3-87ac-e4c1b074010f",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "4c9136d4-b227-40ed-9199-dae331be38c1",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "404",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Enable rating service",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "77025143-6e95-4cc8-b100-7a5590b24081",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"portal\": {\n\t\t\"rating\": {\n\t\t\t\"enabled\": true\n\t\t}\n\t}\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/portal",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"portal"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create API",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "c22cc6a4-2b98-458c-92b4-06a6af480e89",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_api\", JSON.stringify(jsonData));",
													"pm.environment.set(\"created_api_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"404API\",\n\t\"version\":\"1.0\",\n\t\"description\":\"API for 'Page not found' and API not visible\",\n\t\"contextPath\":\"/404api\",\n\t\"endpoint\":\"http://localhost\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis"
											]
										}
									},
									"response": []
								},
								{
									"name": "Publish created API",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "832ad462-5c45-4567-adb5-5f18d3bf7439",
												"exec": [
													"var createdApi_toPublish = JSON.parse(pm.environment.get(\"created_api\"));",
													"createdApi_toPublish.lifecycle_state='published';",
													"delete createdApi_toPublish.id;",
													"delete createdApi_toPublish.state;",
													"delete createdApi_toPublish.created_at;",
													"delete createdApi_toPublish.updated_at;",
													"delete createdApi_toPublish.owner;",
													"delete createdApi_toPublish.context_path;",
													"pm.environment.set(\"createdApi_toPublish\", JSON.stringify(createdApi_toPublish));",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "8b9ba884-e0ff-48a9-8f6b-4e51b9d18e78",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{createdApi_toPublish}}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "74381a7d-7ffa-4a5f-baf3-ed030c5ed939",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "d85146d2-3a47-446f-8a21-65b7ad4f45d9",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "API not found",
							"item": [
								{
									"name": "GET /apis/:apiId - API not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "4b653158-809e-4fb3-9f83-ef42c307910a",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "API"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /apis/:apiId/metrics - API not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9fda7b61-38d5-4b5c-9705-33cf7ccfe7c5",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/metrics",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"metrics"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "API"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /apis/:apiId/pages - API not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b2f9a06d-94da-4d7b-a5a0-c83435eaae07",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/pages",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"pages"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "API"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /apis/:apiId/pages/:pageId - API not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "d048230f-0e10-4517-bad3-8fdd0fddad80",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/pages/:pageId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"pages",
												":pageId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "API"
												},
												{
													"key": "pageId",
													"value": "PAGE"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /apis/:apiId/pages/:pageId/content - API not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "8821bbbf-5690-44ab-bc0d-644e9e8cc4d4",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/pages/:pageId/content",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"pages",
												":pageId",
												"content"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "API"
												},
												{
													"key": "pageId",
													"value": "PAGE"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /apis/:apiId/picture - API not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "6b0372d0-1cf7-419f-9f25-f5eea3e4d289",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/picture",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"picture"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "API"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /apis/:apiId/plans - API not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "796df958-ad13-45d4-b8f7-1b8956f35e78",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/plans",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"plans"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "API"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /apis/:apiId/ratings - API not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "c2c51cf4-ea3e-45fe-a21f-e1545638f4d6",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/ratings",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"ratings"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "API"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /apis/:apiId/rating - API not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "99562540-8f5d-4bb1-aab7-0fac9de05f07",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"title\":\"404 title\",\n\t\"comment\":\"404 comment\",\n\t\"value\": 4\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/ratings",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"ratings"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "API"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /apis/:apiId/subscribers - API not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "4228e617-1bac-4515-8a6d-2da9b99a0c6d",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/subscribers",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"subscribers"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "API"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "bdfdf9f5-4e1b-4141-8eef-1d9068881c4c",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "e72e8826-aa57-4c12-a29e-2c73d969f32b",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"API not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Api [API] can not be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Page not found",
							"item": [
								{
									"name": "GET /apis/:apiId/pages/:pageId - Page not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "bf3b251e-06a1-438b-92f0-408ba6c4a083",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "dd820a20-63cf-474d-aa19-cdd1251b135c",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/pages/:pageId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"pages",
												":pageId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												},
												{
													"key": "pageId",
													"value": "PAGE"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /apis/:apiId/pages/:pageId/content - Page not found Copy",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "fc6a1bca-0c05-411a-bae4-b49aae5d5b13",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "c53bd442-2dc4-4a0a-aab7-1005ca450b10",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/pages/:pageId/content",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"pages",
												":pageId",
												"content"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												},
												{
													"key": "pageId",
													"value": "PAGE"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "63335aaa-19e9-4f9f-858b-fb5da9466493",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "dd46c250-3dd0-4522-82a5-f3be228ce814",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"Page not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Page [PAGE] can not be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "API not visible for current user - test with a user != admin",
							"item": [
								{
									"name": "GET /apis/:apiId - API not visible by user",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "aa68061b-48b0-4918-b948-f338b9461d10",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /apis/:apiId/pages - API not visible by user",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "c91b3cf4-95f2-4044-b39f-a2ab07aa29dd",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/pages",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"pages"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /apis/:apiId/pages/:pageId - API not visible by user",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9b737ff3-092d-45da-aeb0-b7fe86598c64",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/pages/:pageId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"pages",
												":pageId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												},
												{
													"key": "pageId",
													"value": "PAGE"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /apis/:apiId/picture - API not visible by user",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "bc819e13-e158-49d6-848e-e4eb5dce9df1",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/picture",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"picture"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /apis/:apiId/plans - API not visible by user",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "5a8fc81c-8c75-4a41-a319-e6b6bd7998ea",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/plans",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"plans"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /apis/:apiId/ratings - API not visible by user",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b73705fd-71a8-40ad-9a76-6b2c745eb3a2",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/ratings",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"ratings"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"auth": {
								"type": "basic",
								"basic": [
									{
										"key": "password",
										"value": "api1",
										"type": "string"
									},
									{
										"key": "username",
										"value": "api1",
										"type": "string"
									}
								]
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "5ffce505-c3f1-4826-ad3f-bbaaf31b369c",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "9c48090d-7ef4-4811-8ad9-d20e9632fa71",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"API not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Api [\"+pm.environment.get(\"created_api_id\")+\"] can not be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean up --",
							"item": [
								{
									"name": "Delete created API",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "09345de9-fadf-4481-91a2-48b23acfb384",
												"exec": [
													"tests[\"Status code is 204\"] = responseCode.code === 204;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "36430fe0-4ebf-4165-a7b8-806c20aa8eef",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "1e2d3343-32f6-4721-ab9e-b22dd33a563d",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "2e2cfd33-b891-4f8d-9fcd-a0990fd4a0ec",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "a512e4c2-4c8b-4d2d-9cf9-ef4b78a05cf6",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "503",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Disable rating service",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "3e524a88-6bfc-4be1-977d-4a6ba0495d94",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"portal\": {\n\t\t\"rating\": {\n\t\t\t\"enabled\": false\n\t\t}\n\t}\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/portal",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"portal"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create API",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "faf403ed-2713-446e-93be-9a4873fb63af",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_api\", JSON.stringify(jsonData));",
													"pm.environment.set(\"created_api_id\", jsonData.id);",
													"pm.environment.set(\"created_api_owner_id\", jsonData.owner.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"404API\",\n\t\"version\":\"1.0\",\n\t\"description\":\"API for 'Page not found' and API not visible\",\n\t\"contextPath\":\"/404api\",\n\t\"endpoint\":\"http://localhost\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis"
											]
										}
									},
									"response": []
								},
								{
									"name": "Publish created API",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "90ebe702-88c2-42fe-83ef-68ab6f790f25",
												"exec": [
													"var createdApi_toPublish = JSON.parse(pm.environment.get(\"created_api\"));",
													"createdApi_toPublish.lifecycle_state='published';",
													"delete createdApi_toPublish.id;",
													"delete createdApi_toPublish.state;",
													"delete createdApi_toPublish.created_at;",
													"delete createdApi_toPublish.updated_at;",
													"delete createdApi_toPublish.owner;",
													"delete createdApi_toPublish.context_path;",
													"pm.environment.set(\"createdApi_toPublish\", JSON.stringify(createdApi_toPublish));",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "273ba342-7c46-4436-a09c-967146afe476",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{createdApi_toPublish}}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "35c69d1f-f800-4eef-a4dd-e4de15f9e995",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "fc4d675a-2def-4c4d-8d69-29d233d6a5d9",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Test cases --",
							"item": [
								{
									"name": "POST /apis/:apiId/rating - Rating service is disabled",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "45e19358-395a-4470-9c1d-9083c130ec75",
												"exec": [
													"pm.test(\"Rating service disabled\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"API rating service is unavailable.\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"title\":\"400 new title\",\n\t\"comment\":\"400 new comment\",\n\t\"value\": 3\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/apis/:apiId/ratings",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"ratings"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "e42910a3-f3dd-4d11-812e-7ac0ea7726a5",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "d1ab4b4e-0956-4241-ae68-89bdbdcbaa3a",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 503\", function () {",
											"    pm.response.to.have.status(503);",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean up --",
							"item": [
								{
									"name": "Delete created API",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "038a8bf5-8abe-4e02-8e01-00f7168c0f72",
												"exec": [
													"tests[\"Status code is 204\"] = responseCode.code === 204;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "5294cbcb-747b-4107-883a-a34c2cdc2b96",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "6f2b4638-70f5-4d43-80e8-ec3f061fc45b",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "069ba790-3d7d-41a8-a1f7-586fe07148a5",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "09801e2c-d059-4bd6-a875-08f8e3c4fec9",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "applications",
			"item": [
				{
					"name": "400",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Create Application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "6a7dd1ff-650d-4229-9910-76787b9f6783",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_application_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"404Application\",\n\t\"description\":\"Application for 'Notification not found', 'Member not found' and 'Log not found'\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/applications",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"applications"
											]
										}
									},
									"response": []
								},
								{
									"name": "Enable client registration service",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "12e9ff9a-ab7e-4290-bd2f-4ed94c58b01a",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"application\": {\n\t\t\"registration\": {\n\t\t\t\"enabled\": true\n\t\t}\n\t}\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/portal",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"portal"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create a notification config",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "05568e2f-965e-4db3-8a77-e2dbd692cb0c",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_generic_config\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"400GenericConfig\",\n\t\"config_type\":\"GENERIC\",\n\t\"referenceId\":\"DEFAULT\",\n\t\"notifier\":\"default-email\",\n\t\"hooks\":[],\n\t\"referenceType\":\"PORTAL\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/configuration/notificationsettings",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"configuration",
												"notificationsettings"
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "df769d39-508f-4d47-81be-5a4e38b7087b",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "ca81c122-2a45-4869-9f2d-31bde5966ef7",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Invalid input",
							"item": [
								{
									"name": "POST /applications - Input must not be null.",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "98ba8cd4-3d23-4361-b3b0-643c027d489f",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications"
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId - Input must not be null.",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "285e4eee-fe7f-4607-9faa-17ce144bb410",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId/notifications - Input must not be null.",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9c4ee6ed-e545-4f00-a33e-412671b93db5",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/notifications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"notifications"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/members - Input must not be null.",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "eba97f21-2c1e-4a04-8055-99291f9e14cc",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/members",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"members"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/members/_transfer_ownership - Input must not be null.",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e11248b4-8b09-4c54-aedf-a95e2a1df378",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/members/_transfer_ownership",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"members",
												"_transfer_ownership"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId/members/:memberId - Input must not be null.",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9e49756c-fd08-486e-9eeb-53ee46aa109e",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/members/:memberId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"members",
												":memberId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "memberId",
													"value": "MEMBER"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "5abf0055-dc25-4baa-b85e-027c3d8b13ea",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "5caa1ef5-d2dc-45ec-a8a5-65ec512acdd0",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"pm.test(\"Input must not be null.\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Input must not be null.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "'applicationId' is not the same that the application in payload",
							"item": [
								{
									"name": "PUT /applications/:applicationId - 'applicationId' is not the same that the application in payload",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "87e3b41f-4219-440f-bf54-4290a98f033e",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"id\":\"APPLICATION\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "6cf4feb3-904e-4945-95fe-7a790bc7a340",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "2b239b37-8eb1-4e6c-a4df-e1697efa9ea4",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"pm.test(\"'applicationId' is not the same that the application in payload\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"'applicationId' is not the same that the application in payload\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Client secret for application [404Application] can not be renew.",
							"item": [
								{
									"name": "POST /applications/:applicationId/_renew_secret - Invalid input",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "1731e618-ece9-4ade-822e-3c0ad612bf6e",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/_renew_secret",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"_renew_secret"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "63a1afc0-f275-467a-97ce-ae02d2dcf3c0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "bf22d744-a4fc-4455-98f6-a00ac2847dab",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"pm.test(\"Client secret for application [404Application] can not be renew.\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Client secret for application [404Application] can not be renew.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "log query param validation",
							"item": [
								{
									"name": "POST /applications/:applicationId/logs/_export - From = -1",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "02954b80-0b93-4ed8-8353-fa9f57f2a7eb",
												"exec": [
													"pm.test(\"Query parameter 'from' is not valid\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Query parameter 'from' is not valid\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/logs/_export?from=-1",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"logs",
												"_export"
											],
											"query": [
												{
													"key": "from",
													"value": "-1"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/logs/_export - To = -1",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "8852f5ad-1dd8-449f-aaec-b82ce8561f6a",
												"exec": [
													"pm.test(\"Query parameter 'to' is not valid\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Query parameter 'to' is not valid\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/logs/_export?to=-1",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"logs",
												"_export"
											],
											"query": [
												{
													"key": "to",
													"value": "-1"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/logs/_export - from >= to",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "d8327f60-b1b7-4697-90a9-802f08ed4498",
												"exec": [
													"pm.test(\"'from' query parameter value must not be greater than 'to'\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"'from' query parameter value must not be greater than 'to'\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/logs/_export?from=0&to=0",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"logs",
												"_export"
											],
											"query": [
												{
													"key": "from",
													"value": "0"
												},
												{
													"key": "to",
													"value": "0"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/logs/_export - order not valid",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "53a61352-8989-4032-b042-b308b2e793d6",
												"exec": [
													"pm.test(\"'order' query parameter value must be 'ASC' or 'DESC'\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"'order' query parameter value must be 'ASC' or 'DESC'\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/logs/_export?from=0&to=1&order=ORDER",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"logs",
												"_export"
											],
											"query": [
												{
													"key": "from",
													"value": "0"
												},
												{
													"key": "to",
													"value": "1"
												},
												{
													"key": "order",
													"value": "ORDER"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "5836c4d2-cc30-429b-8142-dc499cbd3616",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "e9d60309-a78f-4a09-ad0a-76bfad820852",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "analytics query param validation",
							"item": [
								{
									"name": "GET /applications/:applicationId/analytics - no type",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "f04cec3e-9036-48f7-b7fc-22b42063c3ac",
												"exec": [
													"pm.test(\"Query parameter 'type' must be present and one of : GROUP_BY, DATE_HISTO, COUNT\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Query parameter 'type' must be present and one of : GROUP_BY, DATE_HISTO, COUNT\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/analytics",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"analytics"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/analytics   - From = -1",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "ecfe5f70-32c3-45ae-91cc-5d9e7ee187ad",
												"exec": [
													"pm.test(\"Query parameter 'from' is not valid\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Query parameter 'from' is not valid\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/analytics?type=GROUP_BY&from=-1",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"analytics"
											],
											"query": [
												{
													"key": "type",
													"value": "GROUP_BY"
												},
												{
													"key": "from",
													"value": "-1"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/analytics - To = -1",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "77e1010f-8f94-4b8e-9b0c-93490d3b14b9",
												"exec": [
													"pm.test(\"Query parameter 'to' is not valid\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Query parameter 'to' is not valid\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/analytics?type=GROUP_BY&to=-1",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"analytics"
											],
											"query": [
												{
													"key": "type",
													"value": "GROUP_BY"
												},
												{
													"key": "to",
													"value": "-1"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GETT /applications/:applicationId/analytics - from >= to",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "4bbd0839-e85b-4620-990a-cc510e438ae0",
												"exec": [
													"pm.test(\"'from' query parameter value must not be greater than 'to'\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"'from' query parameter value must not be greater than 'to'\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/analytics?type=GROUP_BY&from=0&to=0",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"analytics"
											],
											"query": [
												{
													"key": "type",
													"value": "GROUP_BY"
												},
												{
													"key": "from",
													"value": "0"
												},
												{
													"key": "to",
													"value": "0"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/analytics - Interval = -1",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "61ef423e-3f3f-4e83-a8e4-9795a190db0a",
												"exec": [
													"pm.test(\"Query parameter 'interval' is not valid\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Query parameter 'interval' is not valid\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/analytics?type=GROUP_BY&from=0&to=1&interval=-1",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"analytics"
											],
											"query": [
												{
													"key": "type",
													"value": "GROUP_BY"
												},
												{
													"key": "from",
													"value": "0"
												},
												{
													"key": "to",
													"value": "1"
												},
												{
													"key": "interval",
													"value": "-1"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/analytics - Interval invalid",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "0f9abeb6-ab35-4b9b-b7d6-780df337da3d",
												"exec": [
													"pm.test(\"Query parameter 'interval' is not valid. 'interval' must be >= 1000 and <= 1000000000\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Query parameter 'interval' is not valid. 'interval' must be >= 1000 and <= 1000000000\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/analytics?type=DATE_HISTO&from=0&to=1&interval=100&",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"analytics"
											],
											"query": [
												{
													"key": "type",
													"value": "DATE_HISTO"
												},
												{
													"key": "from",
													"value": "0"
												},
												{
													"key": "to",
													"value": "1"
												},
												{
													"key": "interval",
													"value": "100"
												},
												{
													"key": null,
													"value": null
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/analytics - field is missing",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "aa440281-82ea-4530-943a-3805644a956a",
												"exec": [
													"pm.test(\"'field' query parameter is required for 'group_by' request\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"'field' query parameter is required for 'group_by' request\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/analytics?type=GROUP_BY&from=0&to=1&interval=1000",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"analytics"
											],
											"query": [
												{
													"key": "type",
													"value": "GROUP_BY"
												},
												{
													"key": "from",
													"value": "0"
												},
												{
													"key": "to",
													"value": "1"
												},
												{
													"key": "interval",
													"value": "1000"
												}
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "839f4317-e972-435d-9ff5-662e0eee0124",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "316945d0-292a-43ec-a5d3-cfae9515c474",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean up --",
							"item": [
								{
									"name": "Delete notification settings",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "11a5de60-5255-49d2-97bd-0e413cf40d8d",
												"exec": [
													"tests[\"Status code is 204\"] = responseCode.code === 204;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/configuration/notificationsettings/:notificationId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"configuration",
												"notificationsettings",
												":notificationId"
											],
											"variable": [
												{
													"key": "notificationId",
													"value": "{{created_generic_config}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete created application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "63d44bad-63b8-440c-b5a1-d5acd76c661e",
												"exec": [
													"tests[\"Status code is 204\"] = responseCode.code === 204;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "909e5fbd-f4e6-4279-8a7b-09d389942254",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "febbc277-f6b8-4436-9dbd-c6fca842fd7b",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "32c6fbf6-dcb6-4805-9f7a-0ab0ad0b260c",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "8cda72a9-c0d4-4c27-a09a-0a580bddefee",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "403",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Create Application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "af4bf636-d76a-4471-b071-f7038c5e97bd",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_application_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"403Application\",\n\t\"description\":\"Application for Forbidden Access\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/applications",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"applications"
											]
										}
									},
									"response": []
								},
								{
									"name": "GET USER Environment Role",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "fee40d3c-e10c-4cf9-8435-dcfbf50537e0",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;",
													"",
													"var jsonData = pm.response.json();",
													"jsonData.scope = \"ENVIRONMENT\";",
													"pm.environment.set(\"USER_ENV_ROLE\", jsonData);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/configuration/rolescopes/ENVIRONMENT/roles/USER",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"configuration",
												"rolescopes",
												"ENVIRONMENT",
												"roles",
												"USER"
											]
										}
									},
									"response": []
								},
								{
									"name": "Remove Application permissions from USER Role",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "ba55d932-7215-42cb-bc16-2f6a89e422a2",
												"exec": [
													"var userRole = pm.environment.get(\"USER_ENV_ROLE\");",
													"userRole.permissions.APPLICATION = [];",
													"pm.environment.set(\"UPDATED_USER_ENV_ROLE\", JSON.stringify(userRole));"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "c1c761c1-e5c5-46a9-8ab5-78d11c2ef6a4",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{UPDATED_USER_ENV_ROLE}}\n",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/configuration/rolescopes/ENVIRONMENT/roles/USER",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"configuration",
												"rolescopes",
												"ENVIRONMENT",
												"roles",
												"USER"
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "9fb89fb9-ff98-40d0-9cf9-4a262c19c277",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "3a198d55-8dcd-4ed8-b45a-583325422e58",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Test cases --",
							"item": [
								{
									"name": "GET /applications",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications"
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications",
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications"
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "DELETE /applications/:applicationId",
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/picture",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/picture",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"picture"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/notifications",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/notifications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"notifications"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId/notifications",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b4acaca7-3b68-4def-a297-925be07b3a52",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"hooks\":\"[NEW_SUBSCRIPTION]\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/notifications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"notifications"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/members",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/members",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"members"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/members/:memberId",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/members/:memberId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"members",
												":memberId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "memberId",
													"value": "MEMBER"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId/members/:memberId",
									"request": {
										"method": "PUT",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/members/:memberId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"members",
												":memberId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "memberId",
													"value": "MEMBER"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "DELETE /applications/:applicationId/members/:memberId",
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/members/:memberId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"members",
												":memberId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "memberId",
													"value": "MEMBER"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/members",
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/members",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"members"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/members/_transfer_ownership",
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/members/_transfer_ownership",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"members",
												"_transfer_ownership"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/analytics",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/analytics",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"analytics"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/logs",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/logs",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"logs"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/logs/:logId",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/logs/:logId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"logs",
												":logId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "logId",
													"value": "LOG"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/logs/_export",
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/logs/_export",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"logs",
												"_export"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/_renew_secret",
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/_renew_secret",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"_renew_secret"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"auth": {
								"type": "basic",
								"basic": [
									{
										"key": "password",
										"value": "password",
										"type": "string"
									},
									{
										"key": "username",
										"value": "user",
										"type": "string"
									}
								]
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "710fa6f6-22ba-4393-81dd-3969f77c790a",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "1560df4a-1192-45bb-ae7d-b80625e58d2c",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 403\", function () {",
											"    pm.response.to.have.status(403);",
											"});",
											"",
											"pm.test(\"You do not have sufficient rights to access this resource\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"You do not have sufficient rights to access this resource\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean up --",
							"item": [
								{
									"name": "Reset permissions from USER Role",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "7c3609ec-8e72-477b-b039-a24a5a7e8a67",
												"exec": [
													"var userRole = pm.environment.get(\"USER_ENV_ROLE\");",
													"userRole.permissions.APPLICATION = [ \"C\", \"R\", \"U\", \"D\"];",
													"pm.environment.set(\"USER_ENV_ROLE\", JSON.stringify(userRole));"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "11b8cda5-7a43-45a3-9a72-2761e65b2a65",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{USER_ENV_ROLE}}\n",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/configuration/rolescopes/ENVIRONMENT/roles/USER",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"configuration",
												"rolescopes",
												"ENVIRONMENT",
												"roles",
												"USER"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete created application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9830c3ab-8728-4568-927b-082482f39e56",
												"exec": [
													"tests[\"Status code is 204\"] = responseCode.code === 204;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "ea3f1ec6-f866-4083-9977-d99673e7b867",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "557789d4-0e6d-4b86-b82b-f0df97839eb7",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "404",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Create Application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "fc96158f-9874-4549-867b-4bf289dc2d9d",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_application\", JSON.stringify(jsonData));",
													"pm.environment.set(\"created_application_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"404Application\",\n\t\"description\":\"Application for 'Notification not found', 'Member not found' and 'Log not found'\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/applications",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"applications"
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "d6bfa32d-f6d2-4ac5-9660-484f7eac0170",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "a3450604-6e3f-41a2-86c6-cf66f1a16fbf",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Application not found",
							"item": [
								{
									"name": "GET /applications/:applicationId - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "7eae23c2-ab08-4875-96dc-84819fd85cff",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "0020514f-19ae-46a3-9484-8a157ecce16c",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"id\":\"APPLICATION\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "DELETE /applications/:applicationId - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9e06bf3c-18b3-4537-a148-24865f798c54",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/picture - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e11e0a6f-a962-4c09-b051-9e96ed9fcb6b",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/picture",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"picture"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/notifications - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "99116608-19d4-4f21-947a-47c246fe5e2a",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/notifications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"notifications"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId/notifications - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "86a2d271-b69c-4bbc-ab89-d4452d2bbd2a",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"hooks\": []\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/notifications",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"notifications"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/members - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "0b4acc61-191e-490b-a5d9-6be11a1b5caa",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/members",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"members"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/members - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "f0e57591-c494-4f96-9933-5338bdebf05f",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/members",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"members"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/members/_transfer_ownership - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "d00d582e-f991-4dea-8f67-842f1fe8daeb",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/members/_transfer_ownership",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"members",
												"_transfer_ownership"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/analytics - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "88f0defb-f530-46d4-8c93-22b0cb05117a",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/analytics",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"analytics"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /applications/:applicationId/logs - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "d9806e5d-04d7-44ba-afd1-da43a87c0312",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/logs",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"logs"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/logs/_export - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "4283ef51-18b3-4f00-b02e-db7ef986d60b",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/logs/_export",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"logs",
												"_export"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /applications/:applicationId/_renew_secret - Application not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "3fcb0c89-c277-459a-acab-4d02854f5d0d",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/_renew_secret",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"_renew_secret"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "APPLICATION"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "e47fe994-cd68-4f3d-a3e8-943101ab8c3b",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "6704598c-4717-4f08-b1c7-82b1a239eb7c",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"Application not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Application [APPLICATION] can not be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Member not found",
							"item": [
								{
									"name": "GET /applications/:applicationId/members/:memberId - Member not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "7b2a741e-91da-4a23-8843-cf677cfcbdcd",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/members/:memberId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"members",
												":memberId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "memberId",
													"value": "MEMBER"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "PUT /applications/:applicationId/members/:memberId - Member not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "476e2743-1bc1-414e-b32d-3f6f9e9c8c80",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/members/:memberId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"members",
												":memberId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "memberId",
													"value": "MEMBER"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "DELETE /applications/:applicationId/members/:memberId - Member not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "4fd317f5-818e-4832-a0a6-3d7cad3a1fd7",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/members/:memberId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"members",
												":memberId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "memberId",
													"value": "MEMBER"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "88451341-9292-419e-b129-e95a0340d990",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "e6a7b356-641c-47bb-b4cf-235ebab3ee3c",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"Member not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"User [MEMBER] can not be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Log not found",
							"item": [
								{
									"name": "GET /applications/:applicationId/logs/:logId - Log not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "34e6c924-fc1f-4899-ad5f-1a56df376627",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/applications/:applicationId/logs/:logId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId",
												"logs",
												":logId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												},
												{
													"key": "logId",
													"value": "LOG"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "9cf3f861-52b3-4065-b557-b58f68e97e33",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "8723996b-3138-4911-877a-534ad1862820",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"Log not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Log [LOG] can not be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean up --",
							"item": [
								{
									"name": "Delete created application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "61cbb1ef-de78-4968-a5b8-2ec1cabce4f7",
												"exec": [
													"tests[\"Status code is 204\"] = responseCode.code === 204;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "64f551cd-d5a3-4859-81d4-73d7fb0a8253",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "a1ae4684-bc18-425f-96d9-a53b93986fdf",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "f0506e3f-5df2-4e93-b59a-3cca79f23300",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "537d0496-838b-4844-b31e-3910ab017fa0",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "auth",
			"item": [
				{
					"name": "404",
					"item": [
						{
							"name": "Identity provider not found",
							"item": [
								{
									"name": "POST /auth/oauth2/:identity - Identity provider not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "c8eadcfb-92fb-4d50-8a1d-53ca1c60b6ba",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/auth/oauth2/:identity",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"auth",
												"oauth2",
												":identity"
											],
											"variable": [
												{
													"key": "identity",
													"value": "IDENTITY"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /auth/oauth2/:identity/_exchange  - Identity provider not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "ef9c4036-3d2b-4c22-9c06-8ae56158c101",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/auth/oauth2/:identity/_exchange",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"auth",
												"oauth2",
												":identity",
												"_exchange"
											],
											"variable": [
												{
													"key": "identity",
													"value": "IDENTITY"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "a58e7bdb-4aad-4dd0-b958-a589331a304b",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "9f47df7b-8318-4f43-9033-d1b2302f6c7d",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"Identity provider not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Identity provider [IDENTITY] can not be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "cb33d240-8801-42c0-b4f1-8ddca622d234",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "4e8f8183-fb9a-4ed1-923f-fcd957e969b0",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "configuration",
			"item": [
				{
					"name": "404",
					"item": [
						{
							"name": "GET /configuration/identities/:identityProviderId",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "0a80524d-dc22-4701-a111-95b15801dc48",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/configuration/identities/:identityProviderId",
									"host": [
										"{{GRAVITEEIO_PORTAL_URL}}"
									],
									"path": [
										"portal",
										"environments",
										"DEFAULT",
										"configuration",
										"identities",
										":identityProviderId"
									],
									"variable": [
										{
											"key": "identityProviderId",
											"value": "IDENTITY_PROVIDER"
										}
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "9c49f22a-51f8-4cbf-a118-3d31bd43923d",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "6f9cd319-6640-4f85-9dfd-d7e387e5d2cd",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 404\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"pm.test(\"Identity provider not found\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.errors[0].message).to.eql(\"Identity provider [IDENTITY_PROVIDER] can not be found.\");",
									"});"
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "pages",
			"item": [
				{
					"name": "401",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Create an unpublished page",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "693fcf80-8b5e-49d3-845f-fa027e791f1a",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "718872d9-0ae7-4b3b-a640-d4a5d3ffe224",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_page_id\", jsonData.id);",
													"pm.environment.set(\"created_page_order\", jsonData.order);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"Unpublished Page\",\n\t\"type\":\"SWAGGER\",\n\t\"published\":false\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/portal/pages",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"portal",
												"pages"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Unauthorized to access an unpublished page",
							"item": [
								{
									"name": "GET /pages/:pageId - Unauthorized",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "7bc8a0aa-b3d3-4bd6-ac47-1934218c4b6c",
												"exec": [
													"pm.test(\"Status code is 401\", function () {",
													"    pm.response.to.have.status(401);",
													"});",
													"",
													"pm.test(\"Must be authenticated\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"You must be authenticated to access this resource\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/pages/:pageId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"pages",
												":pageId"
											],
											"variable": [
												{
													"key": "pageId",
													"value": "{{created_page_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /pages/:pageId/content - Unauthorized",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b6296c95-c034-4c19-8c49-f6c9da2a68ec",
												"exec": [
													"pm.test(\"Status code is 401\", function () {",
													"    pm.response.to.have.status(401);",
													"});",
													"",
													"pm.test(\"Must be authenticated\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"You must be authenticated to access this resource\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/pages/:pageId/content",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"pages",
												":pageId",
												"content"
											],
											"variable": [
												{
													"key": "pageId",
													"value": "{{created_page_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Create an exclusion group for page",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "5c738239-b257-4ca4-b47d-b6140e52477a",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_exclusion_group_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"event_rules\": [],\n\t\"name\": \"excludePortalPage\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/configuration/groups",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"configuration",
												"groups"
											]
										}
									},
									"response": []
								},
								{
									"name": "Publish page and add exclusion group",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "779f7c5f-d726-43dd-be0b-57211b291adb",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\": \"Unpublished Page\",\n\t\"excluded_groups\": [\"{{created_exclusion_group_id}}\"],\n\t\"published\": true,\n\t\"order\": {{created_page_order}}\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/portal/pages/:pageId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"portal",
												"pages",
												":pageId"
											],
											"variable": [
												{
													"key": "pageId",
													"value": "{{created_page_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Search user reference to add to exclusion group",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "6d1ed8fd-87c4-44a8-93fd-3c118ef34f4c",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"user_reference\", jsonData[0].reference);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/search/users/?q=application1",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"search",
												"users",
												""
											],
											"query": [
												{
													"key": "q",
													"value": "application1"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Add user in exlusion group",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "5dc39b76-d490-415f-9224-5544a0592a37",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "[{\n\t\"reference\":\"{{user_reference}}\",\n\t\"roles\":[\n\t\t{\"scope\":\"API\",\"name\":\"USER\"},\n\t\t{\"scope\":\"APPLICATION\",\"name\":\"USER\"}\n\t]\n}]",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/configuration/groups/:groupId/members",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"configuration",
												"groups",
												":groupId",
												"members"
											],
											"variable": [
												{
													"key": "groupId",
													"value": "{{created_exclusion_group_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "278e83cd-d389-48f4-bff5-6a61f74ff2bc",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "49e918d7-57e9-4afb-b944-6c8374857ec0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "User is not allowed to access this page",
							"item": [
								{
									"name": "GET /pages/:pageId - Page not published",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "ccce215e-2868-4cb3-aad6-cd419ed3c5d9",
												"exec": [
													"pm.test(\"Status code is 401\", function () {",
													"    pm.response.to.have.status(401);",
													"});",
													"",
													"pm.test(\"Must be authenticated\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"You must be authenticated to access this resource\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "application1",
													"type": "string"
												},
												{
													"key": "username",
													"value": "application1",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/pages/:pageId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"pages",
												":pageId"
											],
											"variable": [
												{
													"key": "pageId",
													"value": "{{created_page_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /pages/:pageId/content - Page not published",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e628873b-a013-4ef2-9b37-37ce3a3ada94",
												"exec": [
													"pm.test(\"Status code is 401\", function () {",
													"    pm.response.to.have.status(401);",
													"});",
													"",
													"pm.test(\"Must be authenticated\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"You must be authenticated to access this resource\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "application1",
													"type": "string"
												},
												{
													"key": "username",
													"value": "application1",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/pages/:pageId/content",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"pages",
												":pageId",
												"content"
											],
											"variable": [
												{
													"key": "pageId",
													"value": "{{created_page_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "caf04cb4-e328-425f-9d7f-85c8a5a4d48e",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "7bcd8cae-3880-4902-a7de-bd52a722b062",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean Up --",
							"item": [
								{
									"name": "Delete exclusion  group",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "1516b1ca-29ec-43b2-8f6a-a42c15b72e45",
												"exec": [
													"tests[\"Status code is 204\"] = responseCode.code === 204;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/configuration/groups/:groupId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"configuration",
												"groups",
												":groupId"
											],
											"variable": [
												{
													"key": "groupId",
													"value": "{{created_exclusion_group_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete page",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "d3b8529a-7ac8-4e18-a734-70ff6e84871d",
												"exec": [
													"tests[\"Status code is 204\"] = responseCode.code === 204;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/portal/pages/:pageId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"portal",
												"pages",
												":pageId"
											],
											"variable": [
												{
													"key": "pageId",
													"value": "{{created_page_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "404",
					"item": [
						{
							"name": "Page not found",
							"item": [
								{
									"name": "GET /pages/:pageId - Page not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "773646aa-bccf-4f6a-9689-59e447f76988",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/pages/:pageId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"pages",
												":pageId"
											],
											"variable": [
												{
													"key": "pageId",
													"value": "PAGE"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "afe2cb5f-6f82-4ceb-9ca9-801ac770e471",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "ecaae1bb-29ef-4086-9509-aaffee4029ef",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"Page not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Page [PAGE] can not be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "ef4c6569-a362-4908-936e-cc9a9fa873f4",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "445bd221-8aca-44d0-9f52-920761a94c1e",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "subscriptions",
			"item": [
				{
					"name": "400",
					"item": [
						{
							"name": "Input must not be null.",
							"item": [
								{
									"name": "POST /subscriptions",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "211b6a45-f2c6-40db-9d03-4cb750b75497",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"Input must not be null.\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Input must not be null.\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/subscriptions",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"subscriptions"
											]
										},
										"description": "Input must not be null"
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "55dbf900-ef95-4018-9565-1aa48639a850",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "30f01996-c657-4896-9535-e8708a6bb819",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "'keyId' parameter does not correspond to the subscription",
							"item": [
								{
									"name": "-- Prepare --",
									"item": [
										{
											"name": "Create API for subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "edd0bc95-8757-45a2-90b4-ea159ace0e68",
														"exec": [
															"tests[\"Status code is 201\"] = responseCode.code === 201;",
															"",
															"var jsonData = pm.response.json();",
															"pm.environment.set(\"created_api_for_sub\", JSON.stringify(jsonData));",
															"pm.environment.set(\"created_api_for_sub_id\", jsonData.id);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"name\":\"400API_SUB\",\n\t\"version\":\"1.0\",\n\t\"description\":\"API for 'Subscription' bad request\",\n\t\"contextPath\":\"/400apisub\",\n\t\"endpoint\":\"http://localhost\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"apis"
													]
												}
											},
											"response": []
										},
										{
											"name": "Publish created API",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"id": "bae38754-57e5-4595-a6d5-a11c0f963969",
														"exec": [
															"var createdApi_for_sub_toPublish = JSON.parse(pm.environment.get(\"created_api_for_sub\"));",
															"createdApi_for_sub_toPublish.lifecycle_state='published';",
															"delete createdApi_for_sub_toPublish.id;",
															"delete createdApi_for_sub_toPublish.state;",
															"delete createdApi_for_sub_toPublish.created_at;",
															"delete createdApi_for_sub_toPublish.updated_at;",
															"delete createdApi_for_sub_toPublish.owner;",
															"delete createdApi_for_sub_toPublish.context_path;",
															"pm.environment.set(\"createdApi_for_sub_toPublish\", JSON.stringify(createdApi_for_sub_toPublish));",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"id": "56de45e8-31a7-46ec-8474-5c5117cee220",
														"exec": [
															"tests[\"Status code is 200\"] = responseCode.code === 200;"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{{createdApi_for_sub_toPublish}}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"apis",
														":apiId"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Create Plan for subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "26b37e4a-136e-484a-b623-3ccab8717575",
														"exec": [
															"tests[\"Status code is 201\"] = responseCode.code === 201;",
															"",
															"var jsonData = pm.response.json();",
															"pm.environment.set(\"created_plan_for_sub_id\", jsonData.id);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"name\":\"Plan_for_sub\",\n\t\"description\": \"a plan for Subscription bad request\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/plans",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"apis",
														":apiId",
														"plans"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Publish created Plan",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "7aaccb8e-ae71-40b2-a206-b5d2898decb3",
														"exec": [
															"tests[\"Status code is 200\"] = responseCode.code === 200;"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"type": "text",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"name\":\"Plan_for_sub\",\n\t\"description\": \"a plan for Subscription bad request\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/plans/:planId/_publish",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"apis",
														":apiId",
														"plans",
														":planId",
														"_publish"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														},
														{
															"key": "planId",
															"value": "{{created_plan_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Create Application for subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "16f4a26b-b932-4b9d-9d42-fc976fdd15cb",
														"exec": [
															"tests[\"Status code is 201\"] = responseCode.code === 201;",
															"",
															"var jsonData = pm.response.json();",
															"pm.environment.set(\"created_application_for_sub_id\", jsonData.id);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"type": "text",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"name\":\"400ApplicationSub\",\n\t\"description\":\"Application for 'Subscription bad request'\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/applications",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"applications"
													]
												}
											},
											"response": []
										},
										{
											"name": "Create a first Subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "c083b6c2-5a38-4acb-abb8-36ba202779ea",
														"exec": [
															"tests[\"Status code is 201\"] = responseCode.code === 201;",
															"",
															"var jsonData = pm.response.json();",
															"pm.environment.set(\"created_sub_id\", jsonData.id);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/subscriptions?application={{created_application_for_sub_id}}&plan={{created_plan_for_sub_id}}",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"apis",
														":apiId",
														"subscriptions"
													],
													"query": [
														{
															"key": "application",
															"value": "{{created_application_for_sub_id}}"
														},
														{
															"key": "plan",
															"value": "{{created_plan_for_sub_id}}"
														}
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Get subscription key",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "a27c5a5c-6ffe-4ab0-9e9f-44ea38235553",
														"exec": [
															"tests[\"Status code is 200\"] = responseCode.code === 200;",
															"",
															"var jsonData = pm.response.json();",
															"pm.environment.set(\"first_sub_api_key\", jsonData[0].key);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/subscriptions/:subscriptionId/keys",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"apis",
														":apiId",
														"subscriptions",
														":subscriptionId",
														"keys"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														},
														{
															"key": "subscriptionId",
															"value": "{{created_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Create a second Plan for subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "3b22f5a6-ea3c-4e2f-a2e4-c2820f399d15",
														"exec": [
															"tests[\"Status code is 201\"] = responseCode.code === 201;",
															"",
															"var jsonData = pm.response.json();",
															"pm.environment.set(\"created_sec_plan_for_sub_id\", jsonData.id);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"type": "text",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"name\":\"Plan_for_sub_2\",\n\t\"description\": \"another plan for Subscription bad request\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/plans",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"apis",
														":apiId",
														"plans"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Publish second created Plan",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "fe8b378a-726c-431e-b649-28e81566c223",
														"exec": [
															"tests[\"Status code is 200\"] = responseCode.code === 200;"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"type": "text",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"name\":\"Plan_for_sub2\",\n\t\"description\": \"a plan for Subscription bad request\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/plans/:planId/_publish",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"apis",
														":apiId",
														"plans",
														":planId",
														"_publish"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														},
														{
															"key": "planId",
															"value": "{{created_sec_plan_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Create a second Subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "5f11f50f-6071-4f2e-aa8e-a4655d569379",
														"exec": [
															"tests[\"Status code is 201\"] = responseCode.code === 201;",
															"",
															"var jsonData = pm.response.json();",
															"pm.environment.set(\"created_sec_sub_id\", jsonData.id);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"type": "text",
														"value": "application/json"
													}
												],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/subscriptions?application={{created_application_for_sub_id}}&plan={{created_sec_plan_for_sub_id}}",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"apis",
														":apiId",
														"subscriptions"
													],
													"query": [
														{
															"key": "application",
															"value": "{{created_application_for_sub_id}}"
														},
														{
															"key": "plan",
															"value": "{{created_sec_plan_for_sub_id}}"
														}
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								},
								{
									"name": "-- Test cases -- ",
									"item": [
										{
											"name": "POST /subscriptions/{subscriptionId}/keys/{keyId}/_revoke",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "68722818-8064-4a4e-aeb8-387bafdcca4e",
														"exec": [
															"pm.test(\"Status code is 400\", function () {",
															"    pm.response.to.have.status(400);",
															"});",
															"pm.test(\"'keyId' parameter does not correspond to the subscription\", function () {",
															"    pm.expect(pm.response.text()).to.include(\"'keyId' parameter does not correspond to the subscription\");",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/subscriptions/:subscriptionId/keys/:keyId/_revoke",
													"host": [
														"{{GRAVITEEIO_PORTAL_URL}}"
													],
													"path": [
														"portal",
														"environments",
														"DEFAULT",
														"subscriptions",
														":subscriptionId",
														"keys",
														":keyId",
														"_revoke"
													],
													"variable": [
														{
															"key": "subscriptionId",
															"value": "{{created_sec_sub_id}}"
														},
														{
															"key": "keyId",
															"value": "{{first_sub_api_key}}"
														}
													]
												}
											},
											"response": []
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								},
								{
									"name": "-- Clean up --",
									"item": [
										{
											"name": "Close subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "6736a484-1596-480d-aeb1-224e4e8c8fa4",
														"exec": [
															"tests[\"Status code is 200\"] = responseCode.code === 200;"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/subscriptions/:subscriptionId/status?status=CLOSED",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"apis",
														":apiId",
														"subscriptions",
														":subscriptionId",
														"status"
													],
													"query": [
														{
															"key": "status",
															"value": "CLOSED"
														}
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														},
														{
															"key": "subscriptionId",
															"value": "{{created_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Close second subscription",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "72f69447-5727-4629-ae35-76ec08af3fe3",
														"exec": [
															"tests[\"Status code is 200\"] = responseCode.code === 200;"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/subscriptions/:subscriptionId/status?status=CLOSED",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"apis",
														":apiId",
														"subscriptions",
														":subscriptionId",
														"status"
													],
													"query": [
														{
															"key": "status",
															"value": "CLOSED"
														}
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														},
														{
															"key": "subscriptionId",
															"value": "{{created_sec_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Delete created application",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "926ba91c-5921-4919-9825-f9f133c0f292",
														"exec": [
															"tests[\"Status code is 204\"] = responseCode.code === 204;"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "DELETE",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/applications/:applicationId",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"applications",
														":applicationId"
													],
													"variable": [
														{
															"key": "applicationId",
															"value": "{{created_application_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Close created Plan",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "ec2d6ba7-34e6-41fc-b7b2-4ca9eead96c4",
														"exec": [
															"tests[\"Status code is 200\"] = responseCode.code === 200;"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/plans/:planId/_close",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"apis",
														":apiId",
														"plans",
														":planId",
														"_close"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														},
														{
															"key": "planId",
															"value": "{{created_plan_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Close second created Plan",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "64a45145-52a3-47c5-be73-f699360e8583",
														"exec": [
															"tests[\"Status code is 200\"] = responseCode.code === 200;"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/plans/:planId/_close",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"apis",
														":apiId",
														"plans",
														":planId",
														"_close"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														},
														{
															"key": "planId",
															"value": "{{created_sec_plan_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Delete created API",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "5c813be9-bd8a-4df5-808c-581c9f5f9856",
														"exec": [
															"tests[\"Status code is 204\"] = responseCode.code === 204;"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "DELETE",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"environments",
														"DEFAULT",
														"apis",
														":apiId"
													],
													"variable": [
														{
															"key": "apiId",
															"value": "{{created_api_for_sub_id}}"
														}
													]
												}
											},
											"response": []
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "403",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Create API for subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "194c258c-f5e6-4bff-9b41-463d9bb87fd6",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_api_for_sub\", JSON.stringify(jsonData));",
													"pm.environment.set(\"created_api_for_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"403API_SUB\",\n\t\"version\":\"1.0\",\n\t\"description\":\"API for Forbidden access to 'Subscription'\",\n\t\"contextPath\":\"/403apisub\",\n\t\"endpoint\":\"http://localhost\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis"
											]
										}
									},
									"response": []
								},
								{
									"name": "Publish created API",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "bf6ab0fe-7ed8-42fe-9be4-66dbc93db345",
												"exec": [
													"var createdApi_for_sub_toPublish = JSON.parse(pm.environment.get(\"created_api_for_sub\"));",
													"createdApi_for_sub_toPublish.lifecycle_state='published';",
													"delete createdApi_for_sub_toPublish.id;",
													"delete createdApi_for_sub_toPublish.state;",
													"delete createdApi_for_sub_toPublish.created_at;",
													"delete createdApi_for_sub_toPublish.updated_at;",
													"delete createdApi_for_sub_toPublish.owner;",
													"delete createdApi_for_sub_toPublish.context_path;",
													"pm.environment.set(\"createdApi_for_sub_toPublish\", JSON.stringify(createdApi_for_sub_toPublish));",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "f0a06218-7bbc-46fe-9327-7225860e4529",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{createdApi_for_sub_toPublish}}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Create Plan for subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "35faad79-b1b8-4a3b-bb52-cbf6f79a7fa1",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_plan_for_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"Plan_for_sub\",\n\t\"description\": \"a plan for Forbidden access to Subscription\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/plans",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"plans"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Publish created Plan",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "dde147c2-d61b-4caa-9992-759d0a80ae5a",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"Plan_for_sub\",\n\t\"description\": \"a plan for Forbidden access to Subscription not found\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/plans/:planId/_publish",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"plans",
												":planId",
												"_publish"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												},
												{
													"key": "planId",
													"value": "{{created_plan_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Create Application for subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "57138a21-8a59-4d4f-b431-3aec7374c4ef",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_application_for_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"403ApplicationSub\",\n\t\"description\":\"Application for 'Forbidden access to Subscription'\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/applications",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"applications"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create Subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "1bc3c26c-bf27-4ffb-8ac7-e1d21fc71451",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/subscriptions?application={{created_application_for_sub_id}}&plan={{created_plan_for_sub_id}}",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"subscriptions"
											],
											"query": [
												{
													"key": "application",
													"value": "{{created_application_for_sub_id}}"
												},
												{
													"key": "plan",
													"value": "{{created_plan_for_sub_id}}"
												}
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get subscription key",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "1d2971ed-9bf3-40e2-b4df-87ccac30e378",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"first_sub_api_key\", jsonData[0].key);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/subscriptions/:subscriptionId/keys",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"subscriptions",
												":subscriptionId",
												"keys"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												},
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "You do not have sufficient rights to access this resource",
							"item": [
								{
									"name": "GET /subscriptions - 2",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "662b9ad8-7d73-40d8-aedb-1305e79c0205",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/subscriptions?applicationId={{created_application_for_sub_id}}",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"subscriptions"
											],
											"query": [
												{
													"key": "applicationId",
													"value": "{{created_application_for_sub_id}}"
												}
											]
										},
										"description": "With an Application Id but without APPLICATION_SUBSCRIPTION[READ]"
									},
									"response": []
								},
								{
									"name": "GET /subscriptions - 3",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e3478b63-6f93-49c8-9858-3d513b3b9596",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/subscriptions?applicationId={{created_application_for_sub_id}}&apiId={{created_api_for_sub_id}}",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"subscriptions"
											],
											"query": [
												{
													"key": "applicationId",
													"value": "{{created_application_for_sub_id}}"
												},
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										},
										"description": "With an API Id and an Application Id but without API_SUBSCRIPTION[READ] and APPLICATION_SUBSCRIPTION[READ]"
									},
									"response": []
								},
								{
									"name": "POST /subscriptions",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "c14e72a9-23b2-4ed4-bf39-64b95dedb4cf",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"application\":\"{{created_application_for_sub_id}}\",\n\t\"plan\":\"{{created_plan_for_sub_id}}\",\n\t\"request\":\"for Subscription scenario\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/subscriptions",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"subscriptions"
											]
										},
										"description": "APPLICATION_SUBSCRIPTION[CREATE]"
									},
									"response": []
								},
								{
									"name": "GET /subsciptions/:subscriptionId",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "dca74a05-0142-45ac-bf23-6eb2f91e4410",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/subscriptions/:subscriptionId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"subscriptions",
												":subscriptionId"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												}
											]
										},
										"description": "API_SUBSCRIPTION[READ] or APPLICATION_SUBSCRIPTION[READ]"
									},
									"response": []
								},
								{
									"name": "POST /subscriptions/:subscriptionId/_close",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b2df156d-29c2-49a0-ad5f-d8185050fca9",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/subscriptions/:subscriptionId/_close",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"subscriptions",
												":subscriptionId",
												"_close"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												}
											]
										},
										"description": "APPLICATION_SUBSCRIPTION[DELETE]"
									},
									"response": []
								},
								{
									"name": "POST /subscriptions/:subscriptionId/keys/_renew",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "7c13b548-abc8-4453-930b-5320d17fd2e9",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/subscriptions/:subscriptionId/keys/_renew",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"subscriptions",
												":subscriptionId",
												"keys",
												"_renew"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												}
											]
										},
										"description": "API_SUBSCRIPTION[UPDATE] or APPLICATION_SUBSCRIPTION[UPDATE]"
									},
									"response": []
								},
								{
									"name": "POST /subscriptions/:subscriptionId/keys/:keyId/_revoke",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "7e2a0610-ef7a-4304-9755-eb52222cefb1",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/subscriptions/:subscriptionId/keys/:keyId/_revoke",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"subscriptions",
												":subscriptionId",
												"keys",
												":keyId",
												"_revoke"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												},
												{
													"key": "keyId",
													"value": "{{first_sub_api_key}}"
												}
											]
										},
										"description": "API_SUBSCRIPTION[UPDATE] or APPLICATION_SUBSCRIPTION[UPDATE]"
									},
									"response": []
								}
							],
							"auth": {
								"type": "basic",
								"basic": [
									{
										"key": "password",
										"value": "password",
										"type": "string"
									},
									{
										"key": "username",
										"value": "user",
										"type": "string"
									}
								]
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "61626454-1e01-4f0e-9d58-b625221fb5c0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "15a7be22-4996-49b2-b258-73e49821278a",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 403\", function () {",
											"    pm.response.to.have.status(403);",
											"});",
											"",
											"pm.test(\"You do not have sufficient rights to access this resource\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"You do not have sufficient rights to access this resource\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean up --",
							"item": [
								{
									"name": "Close subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "ea939f20-eb8a-4452-80f0-de1342642b67",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/subscriptions/:subscriptionId/status?status=CLOSED",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"subscriptions",
												":subscriptionId",
												"status"
											],
											"query": [
												{
													"key": "status",
													"value": "CLOSED"
												}
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												},
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete created application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "311fb737-d37d-4056-b04c-551f76fc8226",
												"exec": [
													"tests[\"Status code is 204\"] = responseCode.code === 204;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Close created Plan",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "a032277b-f1a9-4100-850a-da01604bb958",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/plans/:planId/_close",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"plans",
												":planId",
												"_close"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												},
												{
													"key": "planId",
													"value": "{{created_plan_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete created API",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "68204dd7-d9e9-4ed5-b257-2507c50c063c",
												"exec": [
													"tests[\"Status code is 204\"] = responseCode.code === 204;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "404",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Create API for subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "eee423b3-9161-40e9-9dc0-a367d5a12f13",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_api_for_sub\", JSON.stringify(jsonData));",
													"pm.environment.set(\"created_api_for_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"404API_SUB\",\n\t\"version\":\"1.0\",\n\t\"description\":\"API for 'Subscription not found'\",\n\t\"contextPath\":\"/404apisub\",\n\t\"endpoint\":\"http://localhost\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis"
											]
										}
									},
									"response": []
								},
								{
									"name": "Publish created API",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "4bbf6cc1-4081-46e1-8673-ddb0f3dc538e",
												"exec": [
													"var createdApi_for_sub_toPublish = JSON.parse(pm.environment.get(\"created_api_for_sub\"));",
													"createdApi_for_sub_toPublish.lifecycle_state='published';",
													"delete createdApi_for_sub_toPublish.id;",
													"delete createdApi_for_sub_toPublish.state;",
													"delete createdApi_for_sub_toPublish.created_at;",
													"delete createdApi_for_sub_toPublish.updated_at;",
													"delete createdApi_for_sub_toPublish.owner;",
													"delete createdApi_for_sub_toPublish.context_path;",
													"pm.environment.set(\"createdApi_for_sub_toPublish\", JSON.stringify(createdApi_for_sub_toPublish));",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "e1d9e418-53e6-4fe0-9cf5-a5b89dc23bc2",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{createdApi_for_sub_toPublish}}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Create Plan for subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "38e89fb8-f418-4fa1-a479-7a02ffe1ba9c",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_plan_for_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"Plan_for_sub\",\n\t\"description\": \"a plan for Subscription not found\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/plans",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"plans"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Publish created Plan",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "cccb7ea2-bb2e-41cc-ab96-ddf6f2b88093",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"Plan_for_sub\",\n\t\"description\": \"a plan for Subscription not found\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/plans/:planId/_publish",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"plans",
												":planId",
												"_publish"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												},
												{
													"key": "planId",
													"value": "{{created_plan_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Create Application for subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "5fcf506d-fbc8-4b4a-a9bc-1f80ebb685bc",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_application_for_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"name\":\"404ApplicationSub\",\n\t\"description\":\"Application for 'Subscription not found'\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/applications",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"applications"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create Subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "830b8fb7-b2c0-4eab-ba44-01d1bc01d54b",
												"exec": [
													"tests[\"Status code is 201\"] = responseCode.code === 201;",
													"",
													"var jsonData = pm.response.json();",
													"pm.environment.set(\"created_sub_id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/subscriptions?application={{created_application_for_sub_id}}&plan={{created_plan_for_sub_id}}",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"subscriptions"
											],
											"query": [
												{
													"key": "application",
													"value": "{{created_application_for_sub_id}}"
												},
												{
													"key": "plan",
													"value": "{{created_plan_for_sub_id}}"
												}
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Subscription not found",
							"item": [
								{
									"name": "GET /subscriptions/:subscriptionId - Subscription not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "f9d2592a-d222-4e4c-b78c-6168f2d21669",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/subscriptions/:subscriptionId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"subscriptions",
												":subscriptionId"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "SUBSCRIPTION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /subscriptions/:subscriptionId/_close - Subscription not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "a50914e3-8de2-4cc5-b24e-e3357b506b31",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/subscriptions/:subscriptionId/_close",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"subscriptions",
												":subscriptionId",
												"_close"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "SUBSCRIPTION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /subscriptions/:subscriptionId/keys/_renew - Subscription not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "a46f1757-94f7-444f-977b-6d3112f2dfcd",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/subscriptions/:subscriptionId/keys/_renew",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"subscriptions",
												":subscriptionId",
												"keys",
												"_renew"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "SUBSCRIPTION"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /subscriptions/:subscriptionId/keys/:keyId/_revoke - Subscription not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "3ef32f7d-c8ac-4909-8842-2c8142aba295",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/subscriptions/:subscriptionId/keys/:keyId/_revoke",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"subscriptions",
												":subscriptionId",
												"keys",
												":keyId",
												"_revoke"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "SUBSCRIPTION"
												},
												{
													"key": "keyId",
													"value": "KEY"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "10eedc9c-d1d1-46cd-828e-5476cac5d8cd",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "3daf0f3a-5661-4fab-becb-3f61bfc0ca38",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"Subscription not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Subscription [SUBSCRIPTION] can not be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Key not found",
							"item": [
								{
									"name": "POST /subscriptions/:subscriptionId/keys/:keyId/_revoke - Subscription not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "7fc64b8c-959e-4259-a805-6f97de17e7d2",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/subscriptions/:subscriptionId/keys/:keyId/_revoke",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"subscriptions",
												":subscriptionId",
												"keys",
												":keyId",
												"_revoke"
											],
											"variable": [
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												},
												{
													"key": "keyId",
													"value": "KEY"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "a4ba81b2-0711-4ed0-a86b-1c206c0a9530",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "61788370-b15e-439e-8861-5bc26c580d87",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"Subscription not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"No API Key can be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean up --",
							"item": [
								{
									"name": "Close subscription",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "67a09e93-a6de-4303-8bf9-d2c6214556e0",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/subscriptions/:subscriptionId/status?status=CLOSED",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"subscriptions",
												":subscriptionId",
												"status"
											],
											"query": [
												{
													"key": "status",
													"value": "CLOSED"
												}
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												},
												{
													"key": "subscriptionId",
													"value": "{{created_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete created application",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "83f3e188-c22d-4c4b-9745-e050077c0d9f",
												"exec": [
													"tests[\"Status code is 204\"] = responseCode.code === 204;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/applications/:applicationId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"applications",
												":applicationId"
											],
											"variable": [
												{
													"key": "applicationId",
													"value": "{{created_application_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Close created Plan",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "dfe6e46d-5523-4c24-8a5e-4ded8452de15",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId/plans/:planId/_close",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId",
												"plans",
												":planId",
												"_close"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												},
												{
													"key": "planId",
													"value": "{{created_plan_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete created API",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "135a170a-cf6c-44cd-84e0-b79ac9c8a85c",
												"exec": [
													"tests[\"Status code is 204\"] = responseCode.code === 204;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/apis/:apiId",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"apis",
												":apiId"
											],
											"variable": [
												{
													"key": "apiId",
													"value": "{{created_api_for_sub_id}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "17e15bfd-6ecb-40ae-9fec-aa7739c37ba0",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "ae9133e9-e3af-4dc6-b019-ff967dc4558d",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "tickets",
			"item": [
				{
					"name": "400",
					"item": [
						{
							"name": "POST /tickets",
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/tickets",
									"host": [
										"{{GRAVITEEIO_PORTAL_URL}}"
									],
									"path": [
										"portal",
										"environments",
										"DEFAULT",
										"tickets"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "61277824-bbed-4b05-b17d-7f00cb656775",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "2e269973-d196-42d8-b2db-57bd084a7310",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Input must not be null.\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.errors[0].message).to.eql(\"Input must not be null.\");",
									"});"
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "users & user",
			"item": [
				{
					"name": "400",
					"item": [
						{
							"name": "User already exists",
							"item": [
								{
									"name": "-- Prepare --",
									"item": [
										{
											"name": "Create user",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "f8b8a404-6300-4f70-8f23-57958b88d57e",
														"exec": [
															"tests[\"Status code is 200\"] = responseCode.code === 200;",
															"",
															"var jsonData = pm.response.json();",
															"pm.environment.set(\"created_user_id\", jsonData.id);",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "basic",
													"basic": [
														{
															"key": "password",
															"value": "admin",
															"type": "string"
														},
														{
															"key": "username",
															"value": "admin",
															"type": "string"
														}
													]
												},
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"email\": \"postman-test@example.com\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/users",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"users"
													]
												}
											},
											"response": []
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								},
								{
									"name": "-- Test --",
									"item": [
										{
											"name": "POST /users/registration - user already exist",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "8215e0f6-974f-4a9b-b81e-bc67f41ea890",
														"exec": [
															"pm.test(\"Status code is 400\", function () {",
															"    pm.response.to.have.status(400);",
															"});",
															"",
															"pm.test(\"Invalid email.\", function () {",
															"    var jsonData = pm.response.json();",
															"    pm.expect(jsonData.errors[0].message).to.eql(\"A user [postman-test@example.com] already exists for organization DEFAULT.\");",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"type": "text",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"email\": \"postman-test@example.com\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/users/registration",
													"host": [
														"{{GRAVITEEIO_PORTAL_URL}}"
													],
													"path": [
														"portal",
														"environments",
														"DEFAULT",
														"users",
														"registration"
													]
												}
											},
											"response": []
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								},
								{
									"name": "-- Clean up --",
									"item": [
										{
											"name": "Delete created user",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "9fde63a3-61ad-46bb-af1b-74765a150ae7",
														"exec": [
															"tests[\"Status code is 204\"] = responseCode.code === 204;"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "DELETE",
												"header": [],
												"url": {
													"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/users/:userId",
													"host": [
														"{{GRAVITEEIO_MGMT_URL}}"
													],
													"path": [
														"management",
														"organizations",
														"DEFAULT",
														"users",
														":userId"
													],
													"variable": [
														{
															"key": "userId",
															"value": "{{created_user_id}}"
														}
													]
												}
											},
											"response": []
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "3af62e13-b709-434e-a640-5c65e67c00b4",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "fa4aa873-429f-41cd-b74d-01788f19a727",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Invalid input",
							"item": [
								{
									"name": "PUT /user - input must not be null",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "aa12c379-616e-485b-a084-d908be12eb51",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"Input must not be null.\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Input must not be null.\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "password",
													"type": "string"
												},
												{
													"key": "username",
													"value": "user",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/user",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"user"
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /users/registration - input must not be null",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "f3a6410c-4187-499f-9d0b-ec903ac1664b",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"Input must not be null.\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Input must not be null.\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/users/registration",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"users",
												"registration"
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /users/registration - missing email",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "f6dad451-c686-45c4-93e3-906903d2f4aa",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"Invalid email.\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].code).to.eql(\"registerUser.arg0.email\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/users/registration",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"users",
												"registration"
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /users/registration - invalid email",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "758e7ba5-9a05-4f49-803f-05174995087e",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"Invalid email.\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Value [DUMMY EMAIL] is not a valid email.\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"email\": \"DUMMY EMAIL\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/users/registration",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"users",
												"registration"
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /users/registration/_finalize - input must not be null",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "f5ae9ad1-c2ba-4fce-989a-308572c92e7b",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"Input must not be null.\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Input must not be null.\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/users/registration/_finalize",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"users",
												"registration",
												"_finalize"
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /users/registration/_finalize - missing fields",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "6499cc55-d8d4-496e-9bff-d8b96e0c3c04",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"4 Missing fields.\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors.length).to.eql(4);",
													"    ",
													"    var sortedErrors = jsonData.errors.sort(compare);",
													"    pm.expect(sortedErrors[0].code).to.eql('finalizeRegistration.arg0.firstname');",
													"    pm.expect(sortedErrors[1].code).to.eql('finalizeRegistration.arg0.lastname');",
													"    pm.expect(sortedErrors[2].code).to.eql('finalizeRegistration.arg0.password');",
													"    pm.expect(sortedErrors[3].code).to.eql('finalizeRegistration.arg0.token');",
													"});",
													"",
													"",
													"function compare(a, b) {",
													"    // Use toUpperCase() to ignore character casing",
													"  const titleA = a.code.toUpperCase();",
													"  const titleB = b.code.toUpperCase();",
													"",
													"  let comparison = 0;",
													"  if (titleA > titleB) {",
													"    comparison = 1;",
													"  } else if (titleA < titleB) {",
													"    comparison = -1;",
													"  }",
													"  return comparison;",
													"}"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/users/registration/_finalize",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"users",
												"registration",
												"_finalize"
											]
										}
									},
									"response": []
								},
								{
									"name": "POST /users/_reset_password - input must not be null",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "fbb58ea0-fa22-4208-879c-038facabc30a",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"Input must not be null.\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"Input must not be null.\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/users/_reset_password",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"users",
												"_reset_password"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "401",
					"item": [
						{
							"name": "PUT /user - input.id != currentUser.id",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "862b3c54-a623-4284-8b63-85dca6b8ecee",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"You must be authenticated to access this resource\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"You must be authenticated to access this resource\");",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "password",
											"type": "string"
										},
										{
											"key": "username",
											"value": "user",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"id\": \"\",\n\t\"avatar\": \"\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/user",
									"host": [
										"{{GRAVITEEIO_PORTAL_URL}}"
									],
									"path": [
										"portal",
										"environments",
										"DEFAULT",
										"user"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "404",
					"item": [
						{
							"name": "Notification not found",
							"item": [
								{
									"name": "DELETE /user/notifications/:notificationId",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "0541f314-74fe-47c4-b191-45f4f94b6adb",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/user/notifications/:notificationId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"user",
												"notifications",
												":notificationId"
											],
											"variable": [
												{
													"key": "notificationId",
													"value": "NOTIFICATION"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "4859fa92-c88d-473b-a2e9-b314b955688e",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "0c123c2d-5c37-432a-8199-492b4176e76b",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"Notification not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Portal notification [NOTIFICATION] can not be found.\");",
											"});"
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "f56e2ba8-2db9-4c22-8df5-31543b75aab7",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "574b7aef-1169-43b9-a8cb-98efe8ebf683",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "503",
					"item": [
						{
							"name": "-- Prepare --",
							"item": [
								{
									"name": "Disable registration service",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "ad23f805-2094-4bd8-9d93-05c5cb7cbf1d",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"portal\": {\n\t\t\"userCreation\": {\n\t\t\t\"enabled\": false\n\t\t}\n\t}\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/portal",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"portal"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Registration service not enabled",
							"item": [
								{
									"name": "POST /users/registration",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b3bad887-8906-43e7-81ba-0e3cb571f95b",
												"exec": [
													"pm.test(\"Status code is 503\", function () {",
													"    pm.response.to.have.status(503);",
													"});",
													"",
													"pm.test(\"Registration service disabled\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors[0].message).to.eql(\"User registration service is unavailable.\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"email\": \"test@example.com\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/users/registration",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"users",
												"registration"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "-- Clean up --",
							"item": [
								{
									"name": "Enable registration service",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "6144819f-e62c-4d13-a7e5-04a982b7b8ef",
												"exec": [
													"tests[\"Status code is 200\"] = responseCode.code === 200;"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"portal\": {\n\t\t\"userCreation\": {\n\t\t\t\"enabled\": true\n\t\t}\n\t}\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{GRAVITEEIO_MGMT_URL}}/management/organizations/DEFAULT/environments/DEFAULT/portal",
											"host": [
												"{{GRAVITEEIO_MGMT_URL}}"
											],
											"path": [
												"management",
												"organizations",
												"DEFAULT",
												"environments",
												"DEFAULT",
												"portal"
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "b3320c82-7a00-419c-a9b5-121a4ccd37b8",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "0bd3f193-8641-4893-9d73-16d6730b07a0",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "f662fa09-0d47-4532-b30e-ab8536090544",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "5bf42623-fb51-4b41-bc75-bd15c5ea1b23",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "0632f7bd-0c2d-46e3-926c-4c85ad89fef7",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "b3fe3128-3946-476b-ae1f-be51be2540b8",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "categories",
			"item": [
				{
					"name": "404",
					"item": [
						{
							"name": "Category not found",
							"item": [
								{
									"name": "GET /categories/:categoryId",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "8d25c5f6-4754-4672-9ac7-aac7692195e0",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/categories/:categoryId",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"categories",
												":categoryId"
											],
											"variable": [
												{
													"key": "categoryId",
													"value": "CATEGORY"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "GET /categories/:categoryId/picture",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "09b4de5b-0d65-4e93-85bb-78dc0b8abda9",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{GRAVITEEIO_PORTAL_URL}}/portal/environments/DEFAULT/categories/:categoryId/picture",
											"host": [
												"{{GRAVITEEIO_PORTAL_URL}}"
											],
											"path": [
												"portal",
												"environments",
												"DEFAULT",
												"categories",
												":categoryId",
												"picture"
											],
											"variable": [
												{
													"key": "categoryId",
													"value": "CATEGORY"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "25afe6e6-ed62-4400-bd03-79d06c5ea9e9",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "1d47d1cb-b89c-4053-b443-893d9ad1f780",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"pm.test(\"Category not found\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors[0].message).to.eql(\"Category [CATEGORY] can not be found.\");",
											"});",
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "ca5cea47-e148-43c6-843a-1aa8a229e6f5",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "aaa8c7b4-60d7-404f-b683-3fa55c5391df",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"auth": {
		"type": "basic",
		"basic": [
			{
				"key": "password",
				"value": "admin",
				"type": "string"
			},
			{
				"key": "username",
				"value": "admin",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "e1cf669d-cbe0-49f7-9f12-0043483ed611",
				"type": "text/javascript",
				"exec": [
					"if(!pm.environment.get('X-Xsrf-Token')) {",
					"    pm.sendRequest({",
					"        url: pm.environment.get('GRAVITEEIO_PORTAL_URL') + '/portal/environments/DEFAULT/configuration',",
					"        method: 'GET',",
					"    ",
					"    }, function (err, res) {",
					"        pm.environment.set('X-Xsrf-Token', res.headers.get('X-Xsrf-Token'));",
					"    });",
					"}",
					"",
					"pm.request.headers.add({key: 'X-Xsrf-Token', value: pm.environment.get('X-Xsrf-Token') });"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "7a6d179c-3eb6-499a-98e4-ea5c5f8e55fa",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"protocolProfileBehavior": {}
}